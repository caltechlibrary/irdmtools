.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "ep3util" "1" "2024\-01\-16" "irdmtools user manual" "version 0.0.68 2425acab"
.SH NAME
ep3util
.SH SYNOPSIS
ep3util OPTIONS ACTION [ACTION_PARAMETERS \&...]
.SH DESCRIPTION
\f[B]ep3util\f[R] provides a quick wrapper around EPrints 3.3 REST API.
By default ep3util looks for five environment variables.
.TP
REPO_ID
the EPrints repository id (name of database and archive subdirectory).
.TP
EPRINT_HOST
the hostname for EPrint\[cq]s.
.TP
EPRINT_USER
the username having permissions to access the EPrint REST API.
.TP
EPRINT_PASSWORD
the password for the username with access to the EPrint REST API.
.TP
C_NAME
If harvesting the dataset collection name to harvest the records to.
.TP
EPRINT_DB_HOST
The MySQL hostname holding the EPrints repository database
.TP
EPRINT_DB_USER
The MySQL username used to access EPrints repository database
.TP
EPRINT_DB_PASSWORD
The MySQL password used to access EPrints repository database
.PP
The environment provides the default values for configuration.
They maybe overwritten by using a JSON configuration file.
The corresponding attributes are \[lq]repo_id\[rq],
\[lq]eprint_host\[rq], \[lq]c_name\[rq], \[lq]eprint_db_host\[rq],
\[lq]eprint_db_user\[rq], and \[lq]eprint_db_password\[rq].
.PP
If the environment variables for MySQL access are set then the results
reflect direct access to the database instead of the EPrint REST API.
.SH OPTIONS
.TP
help
display help
.TP
license
display license
.TP
version
display version
.TP
config
provide a path to an alternate configuration file
(e.g.\ \[lq]irdmtools.json\[rq])
.SH ACTION
\f[B]ep3util\f[R] supports the following actions.
.TP
setup
Display an example JSON setup configuration file, if it already exists
then it will display the current configuration file.
No optional or required parameters.
When displaying the JSON configuration a placeholder will be used for
the token value.
.TP
get_all_ids
Returns a list of all repository record ids.
The method uses OAI\-PMH for id retrieval.
It is rate limited and will take come time to return all record ids.
A test instance took 11 minutes to retrieve 24000 record ids.
.TP
get_modified_ids START [END]
Return a list of records created or modified in the START and END date
range.
If END is not provided it is assume to be today.
.TP
get_record RECORD_ID
Returns a specific simplified record indicated by RECORD_ID,
e.g.\ 23808.
The RECORD_ID is a required parameter.
.TP
harvest HARVEST_OPTIONS [KEY_LIST_JSON]
harvest takes a JSON file containing a list of keys and harvests each
record into a dataset collection.
If combined with one of the options, e.g.\ \f[CR]\-all\f[R], you can
skip providing the KEY_LIST_JSON file.
.SH HARVEST_OPTIONS
.TP
\-all
Harvest all records
.TP
\-modified START [END]
Harvest records modified between start and end dates.
.SH ACTION_PARAMETERS
Action parameters are the specific optional or required parameters need
to complete an aciton.
.SH EXAMPLES
Setup for \f[B]ep3util\f[R] by writing an example JSON configuration
file.
\[lq]nano\[rq] is an example text editor program, you need to edit the
sample configuration appropriately.
.IP
.EX
ep3util setup >eprinttools.json
nano eprinttools.json
.EE
.PP
Get a list of all EPrint record ids.
.IP
.EX
ep3util get_all_ids
.EE
.PP
Get a specific EPrint record.
Record is validated against irdmtool EPrints data model.
.IP
.EX
ep3util get_record 23808
.EE
.PP
Harvest all records
.IP
.EX
ep3util harvest \-all
.EE
.PP
Harvest records created or modified in the month of September, 2023.
.IP
.EX
ep3util harvest \-modified 2023\-09\-01 2023\-09\-30
.EE
.SH AUTHORS
R. S. Doiel and Tom Morrell.
