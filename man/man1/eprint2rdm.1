.\" Automatically generated by Pandoc 3.1.4
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "eprint2rdm" "1" "2023-09-15" "irdmtools user manual" "version 0.0.50 83e18f5"
.hy
.SH NAME
.PP
eprint2rdm
.SH SYNOPSIS
.PP
eprint2rdm OPTIONS [EPRINT_HOST] EPRINT_ID
.SH DESCRIPTION
.PP
eprint2rdm is a Caltech Library centric command line application that
takes an EPrint hostname and EPrint ID and returns a JSON document
suitable to import into Invenio RDM.
It relies on access to EPrint\[cq]s REST API.
It uses EPRINT_USER, EPRINT_PASSWORD and EPRINT_HOST environment
variables to access the API.
Using the \[lq]-all-ids\[rq] options you can get a list of keys
available from the EPrints REST API.
.PP
eprint2rdm can havest a set of eprint ids into a dataset collection
using the \[lq]-id-list\[rq] and \[lq]-harvest\[rq] options.
You map also provide customized resource type and person role mapping
for the content you harvest.
This will allow you to be substantially closer to the final record form
needed to crosswalk EPrints data into Invenio RDM.
.SH OPTIONS
.TP
-help
display help
.TP
-license
display license
.TP
-version
display version
.TP
-all-ids
return a list of EPrint ids, one per line.
.TP
-harvest DATASET_NAME
Harvest content to a dataset collection rather than standard out
.TP
-id-list ID_FILE_LIST
(used with harvest) Retrieve records based on the ids in a file, one
line per id.
.TP
-resource-map FILENAME
use this comma delimited resource map from EPrints to RDM resource
types.
The resource map file is a comma delimited file without a header row.
The First column is the EPrint resource type string, the second is the
RDM resource type string.
.TP
-contributor-map FILENAME
use this comma delimited contributor type map from EPrints to RDM
contributor types.
The contributor map file is a comma delimited file without a header row.
The first column is the value stored in the EPrints table
\[lq]eprint_contributor_type\[rq] and the second value is the string
used in the RDM instance.
.SH EXAMPLE
.PP
Example generating a JSON document for from the EPrints repository
hosted as \[lq]eprints.example.edu\[rq] for EPrint ID 118621.
Access to the EPrint REST API is configured in the environment.
The result is saved in \[lq]article.json\[rq].
EPRINT_USER, EPRINT_PASSWORD and EPRINT_HOST (e.g.\ eprints.example.edu)
via the shell environment.
.IP
.nf
\f[C]
EPRINT_USER=\[dq]__USERNAME_GOES_HERE__\[dq]
EPRINT_PASSWORD=\[dq]__PASSWORD_GOES_HERE__\[dq]
EPRINT_HOST=\[dq]eprints.example.edu\[dq]
eprint2rdm 118621 >article.json
\f[R]
.fi
.PP
Generate a list of EPrint ids from a repository
.IP
.nf
\f[C]
eprint2rdm -all-ids >eprintids.txt
\f[R]
.fi
.PP
Generate a JSON document from the EPrints repository hosted as
\[lq]eprints.example.edu\[rq] for EPrint ID 118621 using a resource map
file to map the EPrints resource type to an Invenio RDM resource type
and a contributor type map for the contributors type between EPrints and
RDM.
.IP
.nf
\f[C]
eprint2rdm -resource-map resource_types.csv \[rs]
      -contributor-map contributor_types.csv \[rs]
      eprints.example.edu 118621 \[rs]
      >article.json
\f[R]
.fi
.PP
Putting it together in the to harvest an EPrints repository saving the
results in a dataset collection for analysis or migration.
.IP "1." 3
create a dataset collection
.IP "2." 3
get the EPrint ids to harvest applying a resource type map,
\[lq]resource_types.csv\[rq] and \[lq]contributor_types.csv\[rq] for
contributor type mapping
.IP "3." 3
Harvest the eprint records and save in our dataset collection
.IP
.nf
\f[C]
dataset init eprints.ds
eprint2rdm -all-ids >eprintids.txt
eprint2rdm -id-list eprintids.txt -harvest eprints.ds
\f[R]
.fi
.PP
At this point you would be ready to improve the records in eprints.ds
before migrating them into Invenio RDM.
.SH AUTHORS
R. S. Doiel and Tom Morrell.
